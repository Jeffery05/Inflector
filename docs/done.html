<!DOCTYPE html>

<html lang="en"
    class=" js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers no-applicationcache svg inlinesvg smil svgclippaths">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BYPGTX1QBM"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-BYPGTX1QBM');
    </script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <title>Contact</title>
    <script src="modernizr-2.8.3.js"></script>
    <link href="bootstrap.css" rel="stylesheet">
    <link href="Site.css" rel="stylesheet">
    <link href="favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
</head>

<body>

    <script src="jquery-3.4.1.js" type="text/javascript"></script>
    <script src="bootstrap.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
    </script>


    <header>
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-primary py-3">
            <div class="container">
                <a class="navbar-brand" href="Home.html" style="font-size: 28px;">
                    <i class="bi bi-graph-up" role="img" aria-label="Logo" style="padding-right: 5px; "></i>
                    Inflector
                </a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
                    aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="nav navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="Home.html" style="font-size: 22px;">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="About.html" style="font-size: 22px;">What is inflation?</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="Current Trends.html" style="font-size: 22px;">Current Trends</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="Projection.html" style="font-size: 22px;">Projection</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <div class="container body-content">

        <div class="row" style="margin-top: 5%;  margin-bottom: 3%;">

            <h2 style="text-align: center; margin-bottom: 2%;">Your Projection:</h2>
            <div class="col-sm-3">

            </div>
            <div class="col-sm-6">
                <canvas id="myChart" style="width:100%;max-width:700px"></canvas>
                <!DOCTYPE html>
                <html>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

                <body>
                    <canvas id="myChart" style="width:100%; max-width:600px; margin-left: 100px; height: 50%;"></canvas>
                    <script type="text/javascript">
                        console.log(monthlyRate);
                        const urlParams = new URLSearchParams(window.location.search);
                        const foodExpediture = urlParams.get('foodExpediture');
                        const shelterExpediture = urlParams.get('shelterExpediture');
                        const clothingExpediture = urlParams.get('clothingExpediture');
                        const transportationExpediture = urlParams.get('transportationExpediture');
                        const healthExpediture = urlParams.get('healthExpediture');
                        const householdExpediture = urlParams.get('householdExpediture');
                        const recreationExpediture = urlParams.get('recreationExpediture');
                        const alcoholExpediture = urlParams.get('alcoholExpediture');
                        const totalExpediture = parseInt(foodExpediture) + parseInt(shelterExpediture) + parseInt(clothingExpediture) + parseInt(transportationExpediture) + parseInt(healthExpediture) + parseInt(householdExpediture) + parseInt(recreationExpediture) + parseInt(alcoholExpediture);
                        var xValues = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
                        var country = 'Canada'
                        var monthlyRate = 0.00000;
                        var yearlyRate = 0.00000;

                        $.ajax({
                            method: 'GET',
                            url: 'https://api.api-ninjas.com/v1/inflation?country=' + country,
                            headers: { 'X-Api-Key': 'IpKlmdnDxSgQCSWJbIJHHA==RI3oqxt2t7QpdpsF' },
                            async: false,
                            contentType: 'application/json',
                            success: function (result) {
                                console.log(result[0]);
                                monthlyRate = result[0].monthly_rate_pct;
                                yearlyRate = result[0].yearly_rate_pct;
                            },
                            error: function ajaxError(jqXHR) {
                                console.error('Error: ', jqXHR.responseText);
                            }
                        });


                        monthlyRate = 1.0 + monthlyRate / 100.0;
                        var yearlyInflationRate = 1.0 + ((yearlyRate / 12.0) / 100.0);
                        const fedRate = 1.00166666;
                        console.log(monthlyRate);

                        new Chart("myChart", {
                            type: "line",
                            data: {
                                labels: xValues,
                                datasets: [{
                                    label: 'Monthly Rate of Inflation',
                                    data: [totalExpediture, totalExpediture * monthlyRate, totalExpediture * Math.pow(monthlyRate, 2), totalExpediture * Math.pow(monthlyRate, 3), totalExpediture * Math.pow(monthlyRate, 4), totalExpediture * Math.pow(monthlyRate, 5), totalExpediture * Math.pow(monthlyRate, 6), totalExpediture * Math.pow(monthlyRate, 7), totalExpediture * Math.pow(monthlyRate, 8), totalExpediture * Math.pow(monthlyRate, 9), totalExpediture * Math.pow(monthlyRate, 10), totalExpediture * Math.pow(monthlyRate, 11), totalExpediture * Math.pow(monthlyRate, 12)],
                                    borderColor: "red",
                                    fill: false
                                }, {
                                    label: '2% Rate of Inflation',
                                    data: [totalExpediture, totalExpediture * fedRate, totalExpediture * Math.pow(fedRate, 2), totalExpediture * Math.pow(fedRate, 3), totalExpediture * Math.pow(fedRate, 4), totalExpediture * Math.pow(fedRate, 5), totalExpediture * Math.pow(fedRate, 6), totalExpediture * Math.pow(fedRate, 7), totalExpediture * Math.pow(fedRate, 8), totalExpediture * Math.pow(fedRate, 9), totalExpediture * Math.pow(fedRate, 10), totalExpediture * Math.pow(fedRate, 11), totalExpediture * Math.pow(fedRate, 12)],
                                    borderColor: "green",
                                    fill: false
                                }, {
                                    label: 'Annual Rate of Inflation',
                                    data: [totalExpediture, totalExpediture * yearlyInflationRate, totalExpediture * Math.pow(yearlyInflationRate, 2), totalExpediture * Math.pow(yearlyInflationRate, 3), totalExpediture * Math.pow(yearlyInflationRate, 4), totalExpediture * Math.pow(yearlyInflationRate, 5), totalExpediture * Math.pow(yearlyInflationRate, 6), totalExpediture * Math.pow(yearlyInflationRate, 7), totalExpediture * Math.pow(yearlyInflationRate, 8), totalExpediture * Math.pow(yearlyInflationRate, 9), totalExpediture * Math.pow(yearlyInflationRate, 10), totalExpediture * Math.pow(yearlyInflationRate, 11), totalExpediture * Math.pow(yearlyInflationRate, 12)],
                                    borderColor: "blue",
                                    fill: false
                                }]
                            },
                            options: {
                                legend: { display: true },
                                scales: {
                                    yAxes: [{
                                        scaleLabel: {
                                            display: true,
                                            labelString: 'Monthly Expenditures (in CAD)'
                                        }
                                    }],
                                    xAxes: [{
                                        scaleLabel: {
                                            display: true,
                                            labelString: 'Time (in Months)'
                                        }
                                    }]
                                }
                            }

                        });

                        var yearMonthlyRate = totalExpediture * Math.pow(monthlyRate, 12);
                        var yearAnnualRate = totalExpediture * Math.pow(yearlyInflationRate, 12);
                        var yearHealthyRate = totalExpediture * Math.pow(1.00166666, 12);
                        window.onload = function what() {
                            document.getElementById('exMonth').innerHTML = "$" + yearMonthlyRate.toFixed(2);
                            document.getElementById('exYear').innerHTML = "$" + yearAnnualRate.toFixed(2);
                            document.getElementById('exHealthy').innerHTML = "$" + yearHealthyRate.toFixed(2);
                            document.getElementById('currentExpenses').innerHTML = "$" + totalExpediture.toFixed(2);
                        };
                    </script>
            </div>
        </div>
        <div class="row" style="margin-top: -20%; margin-bottom: 3%; text-align: center;">
            <h1 style="color: black; margin-right: 0%;" class="finalFigures">
                <div id="currentExpenses"></div>
            </h1>
            <p>Is the amount you money you <b>currently</b> pay per month.</p>
        </div>
        <div class="row" style="margin-top: 5%; margin-bottom: 3%; text-align: center;">
            <h1 style="color: red; margin-right: 0%;" class="finalFigures">
                <div id="exMonth"></div>
            </h1>
            <p>Is the amount you should expect to pay per month in a year if the current <b>monthly</b> rate of
                inflation keeps up.</p>
        </div>
        <div class="row" style="margin-top: 5%; margin-bottom: 3%; text-align: center;">
            <h1 style="color: blue; margin-right: 0%;" class="finalFigures">
                <div id="exYear"></div>
            </h1>
            <p>Is the amount you should expect to pay per month in a year if the current average <b>annual</b> rate of
                inflation keeps up.</p>
        </div>
        <div class="row" style="margin-top: 5%; margin-bottom: 3%; text-align: center;">
            <h1 style="color: green; margin-right: 0%;" class="finalFigures">
                <div id="exHealthy"></div>
            </h1>
            <p>Is the amount you should expect to pay per month in a year if the Bank of Canada reaches its mandate of a
                <b>2%</b> annual rate of
                inflation.
            </p>
        </div>


        <hr>
        <footer>
            <p>© 2022 - Hardly Working Ignition Hacks</p>
        </footer>
    </div>

    <script type="text/javascript" src="script.js"></script>

</body>

</html>